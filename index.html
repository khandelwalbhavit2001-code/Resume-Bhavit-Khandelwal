// ResumePrime.jsx — Fixed full file
// Prime-style interactive resume (React + Tailwind)
// This file is a corrected, working version. The previous syntax error was caused by an incomplete ternary
// for backgroundImage in the Experience card. That is fixed below. Paste into a React project (CRA/Vite)

import React, { useState, useRef } from 'react';

const RESUME = {
  name: 'Bhavit Khandelwal',
  title: 'Software Engineer — Fullstack, Cloud & AI',
  contact: {
    email: 'khandelwalbhavit2001@gmail.com',
    phone: '+91-8824208001',
    linkedin: 'https://www.linkedin.com/in/bhavit-khandelwal-806176175/'
  },
  hero: {
    tagline: 'Passionate software engineer skilled in Java, AWS, and scalable microservices — a Cloud + AI engineer who loves building distributed systems and delivering full‑stack, production‑grade solutions.',
    highlights: [
      'Java, Spring Boot, React.js, AWS (EKS, SageMaker, Bedrock)',
      'Microservices, CI/CD, Textract, Retrieval-Augmented Generation (RAG)',
      'Designed scalable platforms & low/no-code AI integrations'
    ]
  },
  experience: [
    {
      company: 'GE Vernova',
      period: 'Feb 2025 – Present',
      location: 'Bangalore, Karnataka',
      bullets: [
        'Built React + Spring Boot platform and deployed backend microservices on AWS EKS for early detection analytics.',
        'Integrated Agentic AI using AWS Bedrock and enabled SageMaker for customer self-service ML.',
        'Improved API performance by 20% and scaled platform by 30%.',
        'Automated workflows, implemented WAF, and increased test coverage to 80%+'
      ]
    },
    {
      company: 'LTIMindtree',
      period: 'Jun 2022 – Feb 2025',
      location: 'Pune, Maharashtra',
      bullets: [
        'Designed large-scale public web applications using Node.js, Java, and Spring Boot.',
        'Architected microservices, implemented message queues and DR for DynamoDB, S3, Lambda.',
        'Automated data extraction using Amazon Textract and set up CI/CD pipelines.',
        'Improved automation and reduced release cycles by 30% (Rising Star award).'
      ]
    }
  ],
  skills: [
    'Java', 'C++', 'PL/SQL', 'TypeScript', 'JavaScript', 'HTML', 'CSS',
    'Spring Boot', 'React.js', 'Hibernate', 'JPA',
    'AWS: EKS, ECS, Lambda, S3, SageMaker, Bedrock, Textract, IAM',
    'Docker', 'Kafka', 'CI/CD (GitHub Actions)', 'RAG, LangChain, Vector DBs'
  ],
  projects: [
    { title: 'Blog Writing Website', tech: 'HTML, CSS, JS, Spring Boot, Elasticsearch', desc: 'User-friendly platform for creating and browsing blogs with interest-based filtering.' },
    { title: 'Blind Cricket (Computer Vision)', tech: 'Image Processing, Deep Learning, CNN', desc: 'Prototype to give audio cues about ball direction to blind players in real-time.' }
  ],
  achievements: [
    'AWS Cloud Practitioner', 'Rising Star award at LTIMindtree', '300+ LeetCode problems solved', 'Published survey in AsiaChi'
  ],
  education: {
    school: 'Vishwakarma Institute Of Technology',
    degree: 'B.Tech — Electronics & Telecommunication',
    year: '2018 – 2022',
    cgpa: '7.89/10'
  }
};

function Carousel({ title, items, renderItem }) {
  const ref = useRef(null);
  function scroll(dir) {
    if (!ref.current) return;
    ref.current.scrollBy({ left: dir * 420, behavior: 'smooth' });
  }
  return (
    <section className="mt-6">
      <div className="flex items-center justify-between mb-2">
        <h3 className="text-xl font-semibold text-white">{title}</h3>
        <div className="flex gap-2">
          <button onClick={() => scroll(-1)} className="bg-white/10 hover:bg-white/20 text-white px-3 py-1 rounded">◀</button>
          <button onClick={() => scroll(1)} className="bg-white/10 hover:bg-white/20 text-white px-3 py-1 rounded">▶</button>
        </div>
      </div>
      <div ref={ref} className="flex gap-4 overflow-x-auto py-2">
        {items.map((it, idx) => (
          <div key={idx} className="min-w-[380px] max-w-[380px] flex-shrink-0">
            {renderItem(it)}
          </div>
        ))}
      </div>
    </section>
  );
}

function Modal({ open, onClose, title, children }) {
  if (!open) return null;
  return (
    <div className="fixed inset-0 z-50 flex items-center justify-center bg-black/70">
      <div className="bg-[#0f1724] rounded-lg border border-white/10 w-[90%] max-w-3xl p-6 text-white">
        <div className="flex justify-between items-center mb-4">
          <h4 className="text-lg font-semibold">{title}</h4>
          <button onClick={onClose} className="text-white/70 hover:text-white">✕</button>
        </div>
        <div className="text-sm leading-relaxed">{children}</div>
      </div>
    </div>
  );
}

export default function ResumePrime() {
  const [active, setActive] = useState(null);

  return (
    <div className="min-h-screen bg-gradient-to-b from-[#0b1218] to-[#0f1724] text-white p-6">
      <header className="max-w-6xl mx-auto">
        <div className="relative rounded-xl overflow-hidden bg-gradient-to-r from-[#071225] to-[#0f2430] p-6 shadow-2xl border border-white/5">
          <div className="flex flex-col lg:flex-row gap-6 items-center">
            <div className="w-full lg:w-2/3">
              <div className="flex items-center gap-4">
                <div className="w-28 h-28 bg-gradient-to-tr from-sky-400 to-indigo-600 rounded-xl flex items-center justify-center text-3xl font-extrabold">BK</div>
                <div>
                  <h1 className="text-3xl font-bold">{RESUME.name}</h1>
                  <p className="text-sky-200 mt-1">{RESUME.title}</p>
                  <p className="text-sm text-white/70 mt-2">{RESUME.hero.tagline}</p>
                  <div className="mt-3 flex gap-2 text-xs flex-wrap">
                    {RESUME.hero.highlights.map((h, i) => (
                      <span key={i} className="bg-white/10 px-3 py-1 rounded-full">{h}</span>
                    ))}
                  </div>
                </div>
              </div>
            </div>
            <div className="w-full lg:w-1/3 flex flex-col items-end gap-3">
              <a href="/Resume_Bhavit.pdf" target="_blank" rel="noreferrer" className="px-4 py-2 bg-[#00a8e1] text-black rounded font-semibold">Download Resume</a>
              <div className="text-right text-sm text-white/70">
                <div>{RESUME.contact.email}</div>
                <div>{RESUME.contact.phone}</div>
                <a href={RESUME.contact.linkedin} className="text-sky-200 underline" target="_blank">LinkedIn</a>
              </div>
            </div>
          </div>
        </div>

        <Carousel
          title="Experience"
          items={RESUME.experience}
          renderItem={(exp) => (
            <div
              onClick={() => setActive({ type: 'experience', data: exp })}
              className="cursor-pointer rounded-lg p-4 h-full border border-white/5 hover:scale-[1.01] transition-all shadow-lg bg-cover bg-center bg-no-repeat"
              style={{
                backgroundImage: exp.company === 'GE Vernova'
                  ? "url('https://images.unsplash.com/photo-1535223289827-42f1e9919769?auto=format&fit=crop&w=1400&q=80')"
                  : exp.company === 'LTIMindtree'
                    ? "url('https://images.unsplash.com/photo-1504384308090-c894fdcc538d?auto=format&fit=crop&w=1400&q=80')"
                    : "none",
              }}
            >
              <div className="backdrop-blur-md bg-black/40 p-3 rounded-lg">
                <div className="text-sm text-white/70">{exp.period} • {exp.location}</div>
                <h4 className="text-xl font-semibold mt-2">{exp.company}</h4>
                <ul className="mt-3 text-sm text-white/80 space-y-1 h-28 overflow-hidden">
                  {exp.bullets.map((b, i) => (
                    <li key={i}>• {b}</li>
                  ))}
                </ul>
              </div>
            </div>
          )}
        />

        {/* Skills (visible grid) */}
        <section className="mt-6">
          <h3 className="text-xl font-semibold text-white mb-3">Skills</h3>
          <div className="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
            {RESUME.skills.map((skill, idx) => (
              <div
                key={idx}
                onClick={() => setActive({ type: 'skill', data: skill })}
                className="cursor-pointer bg-[#0b2235] rounded-xl p-5 border border-white/10 flex items-center justify-center hover:scale-[1.05] hover:bg-[#113450] transition-all shadow-md hover:shadow-xl group min-h-[90px]"
              >
                <span className="text-lg font-semibold group-hover:text-[#00a8e1] transition-colors text-center">{skill}</span>
              </div>
            ))}
          </div>
        </section>

        {/* Projects carousel */}
        <Carousel
          title="Projects"
          items={RESUME.projects}
          renderItem={(prj) => (
            <div onClick={() => setActive({ type: 'project', data: prj })} className="cursor-pointer bg-[#071826] rounded-lg p-4 h-full border border-white/5 hover:scale-[1.01] transition-transform">
              <h4 className="text-lg font-semibold">{prj.title}</h4>
              <div className="text-sm text-white/70 mt-1">{prj.tech}</div>
              <p className="mt-2 text-sm text-white/80 line-clamp-4">{prj.desc}</p>
            </div>
          )}
        />

        <Carousel
          title="Achievements & Certifications"
          items={RESUME.achievements}
          renderItem={(a) => (
            <div onClick={() => setActive({ type: 'achievement', data: a })} className="cursor-pointer bg-[#071826] rounded-lg p-4 h-full border border-white/5 flex items-center justify-center hover:scale-[1.02] transition-transform">
              <span className="text-sm font-semibold">{a}</span>
            </div>
          )}
        />

        <div className="mt-8 grid grid-cols-1 md:grid-cols-3 gap-4">
          <div className="bg-[#071826] rounded-lg p-4 border border-white/5">
            <h4 className="font-semibold">Education</h4>
            <div className="text-sm text-white/70 mt-1">{RESUME.education.school}</div>
            <div className="text-sm text-white/70">{RESUME.education.degree} • {RESUME.education.year}</div>
            <div className="text-sm text-white/70">CGPA: {RESUME.education.cgpa}</div>
          </div>

          <div className="bg-[#071826] rounded-lg p-4 border border-white/5">
            <h4 className="font-semibold">Contact</h4>
            <div className="text-sm text-white/70 mt-2">Email: {RESUME.contact.email}</div>
            <div className="text-sm text-white/70">Phone: {RESUME.contact.phone}</div>
            <a href={RESUME.contact.linkedin} target="_blank" rel="noreferrer" className="text-sky-300 underline mt-2 inline-block">LinkedIn</a>
          </div>

          <div className="bg-[#071826] rounded-lg p-4 border border-white/5">
            <h4 className="font-semibold">Quick Summary</h4>
            <ul className="text-sm text-white/80 mt-2 space-y-1">
              <li>• Backend & Frontend — Java + React</li>
              <li>• Cloud-native on AWS (EKS, SageMaker, Bedrock)</li>
              <li>• Microservices, RAG, Textract, CI/CD</li>
            </ul>
          </div>
        </div>

        <footer className="mt-8 text-white/60 text-sm">Made in Resume Prime — share the deployed URL with recruiters. Put <code>/Resume_Bhavit.pdf</code> in public/ for the download button to work.</footer>

      </header>

      <Modal open={!!active} onClose={() => setActive(null)} title={active?.type?.toUpperCase() + (active?.type ? ' DETAILS' : '')}>
        {active && (
          <div>
            {active.type === 'experience' && (
              <div>
                <h4 className="text-lg font-semibold">{active.data.company} • {active.data.period}</h4>
                <div className="mt-2 text-sm text-white/80 space-y-2">{active.data.bullets.map((b,i) => <div key={i}>• {b}</div>)}</div>
              </div>
            )}

            {active.type === 'skill' && (
              <div>
                <h4 className="text-lg font-semibold">{active.data}</h4>
                <p className="mt-2 text-sm text-white/80">Used extensively in projects and production systems. Ask for examples in chat or contact via email.</p>
              </div>
            )}

            {active.type === 'project' && (
              <div>
                <h4 className="text-lg font-semibold">{active.data.title}</h4>
                <div className="text-sm text-white/80 mt-2">Tech: {active.data.tech}</div>
                <p className="mt-2 text-sm text-white/80">{active.data.desc}</p>
              </div>
            )}

            {active.type === 'achievement' && (
              <div>
                <h4 className="text-lg font-semibold">{active.data}</h4>
                <p className="mt-2 text-sm text-white/80">More details available on request.</p>
              </div>
            )}

            <div className="mt-4 text-right">
              <a href="/Resume_Bhavit.pdf" target="_blank" rel="noreferrer" className="px-3 py-2 bg-[#00a8e1] text-black rounded font-semibold">Open PDF</a>
            </div>
          </div>
        )}
      </Modal>
    </div>
  );
}
